<!DOCTYPE html>
<html lang="en" class="fullscreen-100">

<head>
    <meta charset="utf-8">
    <title>Teste</title>
    <link rel="stylesheet" href="css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="white" />
    <meta name="description" content="">

    <script src="https://unpkg.com/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>


    <script src="https://unpkg.com/fullscreen-polyfill/dist/fullscreen.polyfill.js"></script>

    <script src="https://unpkg.com/focus-visible/dist/focus-visible.js" defer></script>
    <script src="https://unpkg.com/event-target@latest/min.js"></script>
    <script src="https://unpkg.com/resize-observer-polyfill@1.5.0/dist/ResizeObserver.global.js"></script>
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script>
</head>

<body class="fullscreen-100">
    <model-viewer class='model-viewer' id="astronaut" camera-controls interaction-prompt="none" src="models/a.glb" ar
        alt="A 3D model of an astronaut">
        <div id="controls">
            <button data-color="0.06,0.18,0.33,1">Boh</button>
            <button data-color="0.7,0.2,0.2,1">Original</button>
            <button data-color="0.44,0.03,0.03,1">Blue</button>
            <button data-color="1,1,1,1">White</button>
        </div>
    </model-viewer>
    <script>
        const modelViewer = document.querySelector("model-viewer");

        document.querySelector('#controls').addEventListener('click', (event) => {
            const colorString = event.target.dataset.color;

            if (!colorString) {
                return;
            }

            const color = colorString.split(',')
                .map(numberString => parseFloat(numberString));

            matName = 'FITT_Force_colorable';
            console.log('Changing color to: ', color);
            //console.log(modelViewer.model.materials);
            for (let mat of modelViewer.model.materials) {
                console.log(mat.name);
                if (mat.name === matName)
                    material = mat;
                //materials.push(model.materials.find(mat=> mat.name===matName));
            }
            //const [material] = modelViewer.model.materials.find(mat=> mat.name===matName);
            console.log(material.pbrMetallicRoughness);
            material.pbrMetallicRoughness.setBaseColorFactor(color);
            //console.log(mat.pbrMetallicRoughness.getMetallic());
        });
    </script>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>
</body>

</html>